---
alwaysApply: true
description: "Bug 驱动系统进化规则"
---

# Bug 进化机制

## 触发条件

当用户消息以 `BUG:` 开头时，执行以下流程。

## 处理流程

### 1. Bug 识别

识别到 `BUG:` 前缀后，立即进入 Bug 分析模式：

```
已识别 Bug 报告，开始分析...
```

### 2. 信息收集

收集以下信息用于分析：
- 问题现象描述
- 相关代码文件
- 错误日志或截图（如有）
- 预期行为 vs 实际行为

### 3. 根因分析

分析 Bug 的根本原因，分类：

| 类型 | 描述 | 目标文件 |
|------|------|---------|
| 代码规范 | 编码风格、命名、格式问题 | `components.md` 或 `api.md` |
| 架构设计 | 模块划分、依赖关系问题 | `CLAUDE.md` |
| API 设计 | 接口定义、数据格式问题 | `api.md` |
| 部署配置 | 环境、配置相关问题 | `deploy.md` |
| 文档缺失 | 说明不清晰导致的问题 | `documentation.md` |

### 4. 规则提炼

从 Bug 中提取可复用的规则：

**规则格式**：
```markdown
### 规则：[简短名称]

**来源**：Bug [YYYY-MM-DD]
**问题**：[一句话描述问题]
**规则**：
- ✅ 应该：[正确做法]
- ❌ 避免：[错误做法]
```

### 5. 规则沉淀

将规则追加到对应的参考文档中的"从 Bug 中学到的规则"区域。

### 6. 确认反馈

向用户确认规则已保存：

```
✅ Bug 已分析并转化为规则

📝 规则名称：[名称]
📁 更新位置：.cursor/agents/reference/[文件].md
📌 规则内容：[摘要]

此规则将帮助避免类似问题再次发生。
```

## 目标

**每一个 Bug 都是系统进化的机会。**

通过持续积累，AI 助手将越来越了解项目的特性和团队的偏好，从而：
- 减少重复错误
- 提高代码质量
- 加速开发效率

## 相关命令

- `/clarify-requirements` - 需求澄清
- 参考文档：`.cursor/agents/reference/`
