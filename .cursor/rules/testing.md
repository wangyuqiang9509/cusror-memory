# 测试规范

## 最低测试覆盖率：80%

测试类型（全部必须覆盖）：
1. **单元测试** - 独立函数、工具类、组件
2. **集成测试** - API 端点、数据库操作
3. **端到端测试** - 关键用户流程（使用 Playwright）

## 测试驱动开发（TDD）

强制执行的工作流程：
1. 先写测试（RED - 红灯阶段）
2. 运行测试 - 必须失败
3. 编写最小化实现（GREEN - 绿灯阶段）
4. 运行测试 - 必须通过
5. 重构优化（IMPROVE - 改进阶段）
6. 验证覆盖率（≥80%）

## 测试失败排查

1. 使用 **tdd-guide** 智能体
2. 检查测试隔离性
3. 验证 Mock 配置是否正确
4. 修复实现代码而非测试用例（除非测试本身有误）

## 智能体支持

- **tdd-guide** - 开发新功能时主动使用，强制执行先写测试的原则
- **e2e-runner** - Playwright 端到端测试专家
