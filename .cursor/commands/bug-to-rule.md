# Bug 转规则命令

将开发过程中遇到的 Bug 转化为可复用的规则，实现系统进化。

## 执行流程

### 第一步：Bug 分析

收集以下信息：

```markdown
## Bug 分析报告

### 问题描述
[用户描述的 Bug 现象]

### 根本原因
[分析得出的根本原因]

### 影响范围
- 涉及文件：[列出相关文件]
- 影响功能：[描述受影响的功能]

### 修复方案
[具体的修复步骤]
```

### 第二步：规则提炼

从 Bug 中提取可复用的规则：

**规则分类**：

1. **代码规范类** → 更新 `.cursor/agents/reference/` 下的相关文档
2. **架构设计类** → 更新 CLAUDE.md 或创建新的参考文档
3. **工作流程类** → 更新 `.cursor/rules/` 下的规则文件
4. **工具使用类** → 更新相关的 commands 或 skills

**规则格式**：

```markdown
## 规则：[规则名称]

### 来源
Bug #[日期]-[序号]：[简述]

### 规则内容
- ✅ 应该：[正确做法]
- ❌ 避免：[错误做法]

### 示例
```代码示例```
```

### 第三步：规则沉淀

根据规则类型，更新相应的文件：

| 规则类型 | 目标文件 |
|---------|---------|
| Import 规范 | `.cursor/agents/reference/components.md` 或 `api.md` |
| API 设计 | `.cursor/agents/reference/api.md` |
| 组件模式 | `.cursor/agents/reference/components.md` |
| 部署配置 | `.cursor/agents/reference/deploy.md` |
| 文档规范 | `.cursor/agents/reference/documentation.md` |
| 通用规则 | `CLAUDE.md` |

### 第四步：验证确认

向用户确认：

```
我已将此 Bug 转化为以下规则：

📝 规则名称：[名称]
📁 更新文件：[文件路径]
📌 规则摘要：[一句话描述]

这个规则将帮助避免类似问题再次发生。是否需要调整？
```

## 规则模板

新规则应遵循以下模板：

```markdown
### [规则名称]

**来源**：Bug [日期]
**类型**：[代码规范/架构设计/工作流程/工具使用]

**规则**：
- [具体规则内容]

**正确示例**：
```代码```

**错误示例**：
```代码```
```

## 使用方式

在 Cursor 对话框中输入 `BUG: [问题描述]`，系统将自动：
1. 分析问题
2. 提炼规则
3. 更新相应文件
4. 确认结果

## 进化记录

每次规则更新都会在相应文件中留下来源标注，形成完整的进化记录。
